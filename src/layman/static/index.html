<!doctype html>
<head>
  <title>Layman Demo</title>
  <style>
    .mandatory {
      font-weight: bold;
    }
    form {
      padding: 1em;
    }
    form > div {
      padding: 0.5em 0;
    }
  </style>
  <script type="application/ecmascript">
    const on_load = () => {
      const form = document.getElementById('post-layers-form');
      const user = document.getElementById('user');
      form.addEventListener("submit", () => {
        form.action = `/rest/${user.value}/layers`;
      });
    }
  </script>
</head>
<body>
<h2>Upload New Layer</h2>
<p>
  <a href="https://github.com/jirik/gspld/blob/master/REST.md" target="_blank">Documentation</a>
</p>
<p>
  Mandatory fields are <span class="mandatory">bold</span>.
</p>
<form method="post" enctype="multipart/form-data" action="/rest/layers" id="post-layers-form">
  <div>
    <label class="mandatory" for="user">User: </label>
    <input type="text" name="user" id="user" value="browser">
  </div>
  <div>
    <label class="mandatory" for="user">Vector data file: </label>
    <input type="file" accept=".geojson,.json" name="file" id="file" multiple>
  </div>
  <div>
    <label for="name">Layer name: </label>
    <input type="text" name="name" id="name" value="">
  </div>
  <div>
    <label for="title">Layer title: </label>
    <input type="text" name="title" id="title" value="">
  </div>
  <div>
    <label for="description">Layer description: </label>
    <input type="text" name="description" id="description" value="">
  </div>
  <div>
    <label for="name">CRS: </label>
    <input type="text" name="crs" id="crs" value="">
  </div>
  <div>
    <label for="sld">SLD style: </label>
    <input type="file" accept=".sld,.xml" name="sld" id="sld">
  </div>
  <input type="submit" value="Upload" id="submit">
</form>
<script>on_load();</script>
</body>